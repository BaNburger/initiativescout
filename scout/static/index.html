<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Scout â€” Outreach Intelligence</title>
<link rel="stylesheet" href="/static/style.css">
</head>
<body>

<!-- Header -->
<div class="header">
  <div style="display:flex;align-items:center;gap:10px">
    <h1>Scout</h1>
    <select class="filter-select" id="db-selector" onchange="switchDatabase(this.value)" style="min-width:120px"></select>
    <button class="btn btn-sm" onclick="showCreateDb()" title="Create new database">add base</button>
  </div>
  <div class="header-actions">
    <button class="btn btn-sm" onclick="showImport()">Import XLSX</button>
    <button class="btn btn-sm" onclick="showPrompts()">Prompts</button>
    <button class="btn btn-sm" id="btn-enrich-all" onclick="enrichBatch()" disabled>Enrich All</button>
    <button class="btn btn-sm" id="btn-score-all" onclick="scoreBatch()" disabled>Score All</button>
  </div>
</div>

<!-- Stats -->
<div class="stats-bar" id="stats-bar">
  <div class="stat"><strong id="stat-total">0</strong> total</div>
  <div class="stat"><strong id="stat-enriched">0</strong> enriched</div>
  <div class="stat"><strong id="stat-scored">0</strong> scored</div>
  <div class="stat"><span class="verdict-badge verdict-reach_out_now" id="stat-now">0 reach out now</span></div>
  <div class="stat"><span class="verdict-badge verdict-reach_out_soon" id="stat-soon">0 soon</span></div>
  <div class="stat"><span class="verdict-badge verdict-monitor" id="stat-monitor">0 monitor</span></div>
</div>

<!-- Filters -->
<div class="filters">
  <select class="filter-select" id="filter-verdict" onchange="applyFilters()">
    <option value="">All Verdicts</option>
    <option value="reach_out_now">Reach Out Now</option>
    <option value="reach_out_soon">Reach Out Soon</option>
    <option value="monitor">Monitor</option>
    <option value="skip">Skip</option>
    <option value="unscored">Unscored</option>
  </select>
  <select class="filter-select" id="filter-class" onchange="applyFilters()">
    <option value="">All Types</option>
    <option value="deep_tech">Deep Tech</option>
    <option value="student_venture">Student Venture</option>
    <option value="applied_research">Applied Research</option>
    <option value="student_club">Student Club</option>
    <option value="dormant">Dormant</option>
  </select>
  <select class="filter-select" id="filter-uni" onchange="applyFilters()">
    <option value="">All Unis</option>
    <option value="TUM">TUM</option>
    <option value="LMU">LMU</option>
    <option value="HM">HM</option>
  </select>
  <input class="search-input" id="filter-search" type="text" placeholder="Search..." oninput="applyFilters()">
</div>

<!-- Main layout -->
<div class="main">
  <!-- List -->
  <div class="list-panel" id="list-panel">
    <table class="list-table">
      <thead><tr id="list-head"></tr></thead>
      <tbody id="list-body"></tbody>
    </table>
    <div class="empty-state" id="empty-state" style="display:none;">
      <h2>No initiatives loaded</h2>
      <p>Import an XLSX spreadsheet to get started</p>
      <button class="btn btn-primary" onclick="showImport()">Import XLSX</button>
    </div>
  </div>

  <!-- Detail -->
  <div class="detail-panel" id="detail-panel">
    <div class="detail-empty" id="detail-empty">Select an initiative to view details</div>
    <div id="detail-content" style="display:none;"></div>
  </div>
</div>

<!-- Progress bar -->
<div class="progress-bar-container" id="progress-container">
  <div class="progress-label" id="progress-label">Processing...</div>
  <div class="progress-bar"><div class="fill" id="progress-fill" style="width:0%"></div></div>
</div>

<!-- Import overlay -->
<div class="import-overlay hidden" id="import-overlay">
  <div class="import-box" id="import-box">
    <h2>Import Enrichment Data</h2>
    <p>Drag and drop your .xlsx file here, or click to browse</p>
    <button class="btn btn-primary" onclick="document.getElementById('file-input').click()">Choose File</button>
    <input type="file" id="file-input" accept=".xlsx">
    <p style="margin-top:16px;font-size:12px;color:var(--ink-faint)">Press Escape to cancel</p>
  </div>
</div>

<!-- Prompt editor overlay -->
<div class="import-overlay hidden" id="prompt-overlay">
  <div class="prompt-editor-box">
    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:16px">
      <h2>Scoring Prompts</h2>
      <button class="btn btn-sm" onclick="hidePrompts()">Close</button>
    </div>
    <p style="font-size:13px;color:var(--ink-dim);margin-bottom:16px">
      Each dimension is evaluated by an LLM using these system prompts. Edit to customize scoring criteria.
    </p>
    <div id="prompt-editors"></div>
  </div>
</div>

<script src="/static/app.js"></script>
</body>
</html>
